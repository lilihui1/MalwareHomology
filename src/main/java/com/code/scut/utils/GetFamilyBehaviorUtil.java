package com.code.scut.utils;

import com.code.scut.Predict.FileUtil;

import java.io.File;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Set;

/**
 * @ClassName GetFamilyBehaviorUtil
 * @Description 解析家族的行为特征工具类
 * @Author lilihui
 * @Date 2020/4/2 10:44
 * @Version 1.0
 */
public class GetFamilyBehaviorUtil {
    //家族行为特征的存储地址
    // TODO 放到配置文件里
    public static  String familyBehaviorDirPath = "E:\\家族行为特征";

    public static Set<String> getFamilyBehavior(String familyName){
        File familyBehaviorDir = new File(familyBehaviorDirPath);
        String fileContent = "";
        Set<String> behaviorSet = new HashSet<>();
        String behaviors [];
        //文档里的家族名字
        String family;
        if(familyBehaviorDir.exists()){
            /**把目录里的txt全部读取到files[]里了*/
            File files[] = familyBehaviorDir.listFiles();
            //循环所有文档
            for(File file:files){

                /**家族名称：family，内容：fileContent，家族行为特征：behaviors*/
                family = file.getName();
                if (family.indexOf(familyName)!=-1){
                    fileContent = FileUtil.readFile(file.getAbsolutePath());
                    behaviors = fileContent.split(";");
                    for(String behavior:behaviors){
                        //打印家族特征
                        // System.out.println(behavior);
                        String arr[] =behavior.split(":");
                        //behaviorWeightMap.put(arr[0],Double.parseDouble(arr[1]));
                        behaviorSet.add(arr[0]);
                    }
                }

            }
            return behaviorSet;
        }else{
            System.err.println("家族行为特征文件不存在");
            return  null;
        }
    }

}
